<div class="fixed-links">
  <span class="label" style="margin-right: 20px;">Features </span>
  <select id="feature-select" class="feature-select" onchange="jumpToFeature(this)">
    <option value="">Select a feature...</option>
    {% for column_name in context.keys() %}
      <option value="#{{ column_name }}">{{ column_name }}</option>
    {% endfor %}
  </select>
</div>

<script>
  function jumpToFeature(select) {
    if (select.value) {
      location.hash = select.value;
      // Reset to placeholder after short delay to ensure hash works
      setTimeout(() => {
        select.value = "";
      }, 100);
    }
  }
</script>

{% for column_name, stats in context.items() %}
  <h3 id="{{ column_name }}" class="anchor-offset">{{ column_name }}</h3>
  <table> 
    <tbody>
      <tr><td width="100%">
  <table class="feature-summary">
    <tbody>
      {% for key, value in stats.table.items() %}
        <tr>
          <th>{{ key.replace('_', ' ').capitalize() }}</th>
          <td>{{ value }}</td>
        </tr>
      {% endfor %}
    </tbody>
  </table>
  </td>
  </tr>
  <tr>
  <td width="50%">
  {{ stats.plots.plot1 | safe }}
  </td><td width="50%">
  {{ stats.plots.plot2 | safe }}
  </td>
  </tr>
  </tbody>
  </table>
{% endfor %}