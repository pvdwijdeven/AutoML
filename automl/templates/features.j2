<div class="fixed-links">
  <span class="label" style="margin-right: 600px;"></span>
  <select id="feature-select" class="feature-select" onchange="jumpToFeature(this)">
    <option value="">Select a feature...</option>
    {% for column_name in context.keys() %}
      <option value="#{{ column_name }}">{{ column_name }}</option>
    {% endfor %}
  </select>

</div>

<script>
  function jumpToFeature(select) {
    if (select.value) {
      location.hash = select.value;
      // Reset to placeholder after short delay to ensure hash works
      setTimeout(() => {
        select.value = "";
      }, 100);
    }
  }
</script>

{% for column_name, stats in context.items() %}
  <span id="{{ column_name }}"><br></span>
  <h3>{{ column_name }}</h3>
  <table> 
    <tbody>
      <tr><td>
  <table class="feature-summary">
    <tbody>
      {% for key, value in stats.table.items() %}
        <tr>
          <th>{{ key.replace('_', ' ').capitalize() }}</th>
          <td>{{ value }}</td>
        </tr>
      {% endfor %}
    </tbody>
  </table>
  </td>
  </tr>
<tr>
<td>
<table>
<tr>
  <td>
    <div class="plot-wrapper">
      <div class="plot-cell">
        {{ stats.plots.plot1 | safe }}
      </div>

      <div class="plot-cell">
        {{ stats.plots.plot2 | safe }}
      </div>
    </div>
  </td>
  </tr>
  </table>
</tr>
  </tbody>
  </table>
{% endfor %}